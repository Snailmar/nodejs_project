layui.use ( ['table','form'] , function () {	var table = layui.table;	var form = layui.form;	var $ = layui.$;	table.render ( {		elem: '#menu'		, url: './getmenu' ,		method: 'post'		, toolbar: '#toolbarDemo'		, title: '用户数据表'		, cols: [ [			{type: 'checkbox' , fixed: 'left'}			,			{field: 'm_id' , title: 'ID' , width: 80 , fixed: 'left' , unresize: true , sort: true}			,			{field: 'm_name' , title: '菜单名' , width: 120 , edit: 'text'}			,			{				field: 'm_url' , title: '路径' , width: 150 , edit: 'text'			}			,			{field: 'm_no' , title: '菜单编号' , width: 120 , edit: 'text' , sort: true}			,			{field: 'm_status' , title: '菜单状态' , width: 100,  templet: '#switchTpl', unresize: true}			,			{field: 'm_parent' , title: '父级菜单' , width: 120, edit: 'text'}			,			{field: 'm_icon' , title: '标签路径' , width: 150, edit: 'text'}			,			{field: 'm_orderby' , title: '菜单排序' , width: 120 , sort: true, edit: 'text'} ,			{fixed: 'right' , title: '操作' , toolbar: '#barDemo' , width: 150}		] ]		, page: true,		limits:[10,20,30]		,height: 315	} );//头工具栏事件	table.on ( 'toolbar(menu)' , function ( obj ) {		var checkStatus = table.checkStatus ( obj.config.id );		switch (obj.event) {			case 'getCheckData':				layer.open({					type: 2,					title: 'add menu page',					shadeClose: true,					shade: 0.8,					area: ['380px', '90%'],					content: './addmenu' //iframe的url				});				// var data = checkStatus.data;				// layer.alert ( JSON.stringify ( data ) );				break;		}	} );	//监听m_status操作	form.on('switch(sexDemo)', function(obj){		layer.tips(this.value + ' ' + this.name + '：'+ obj.elem.checked, obj.othis);	});//监听行工具事件	table.on ( 'tool(menu)' , function ( obj ) {		var data = obj.data;		if (obj.event === 'del') {			layer.confirm ( '真的删除行么' , function ( index ) {				//发送ajax删除数据				$.ajax ( {					url: './deletemenubyid' ,					type: 'post' ,					data: {m_id: data.m_id}				} ).then ( function ( res ) {					if (res.status == 1) {						obj.del ();						layer.close ( index );					}				} );			} );		}	} );	//监听单元格编辑	table.on ( 'edit(menu)' , function ( obj ) {		var value = obj.value //得到修改后的值			, data = obj.data //得到所在行所有键值			, field = obj.field; //得到字段		layer.msg ( '[ID: ' + data.m_id + '] ' + field + ' 字段更改为：' + value );		//发送ajax,数据库对相应的修改做出反应		$.ajax({			url:'./editbyid',			data:data ,			type:"post",		})	} );//搜索栏	var active = {		reload: function () {			var demoReload = $ ( '#demoReload' );			//执行重载			table.reload ( 'testReload' , {				page: {					curr: 1 //重新从第 1 页开始				}				, where: {					key: {						id: demoReload.val ()					}				}			} );		}	};	$ ( '.demoTable .layui-btn' ).on ( 'click' , function () {		var type = $ ( this ).data ( 'type' );		active[ type ] ?			active[ type ].call ( this ) :			'';	} );} );